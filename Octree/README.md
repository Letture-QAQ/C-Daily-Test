# Octree

## 基本原理

​	在有限的二维平面中，如果想要快速定位到一个坐标的位置，我们可以创建一个笛卡尔平面坐标系，通过确立 X 轴和 Y 轴进行二分法来确定目标点的位置。但是如果将这个移动到有限的三维空间时呢，仅通过创建平面坐标系只能确定某一个坐标在哪一条线上，但是无法确定具体的位置。如果引入 Z 轴的概念呢？

​	在笛卡尔平面坐标系中，我们可以看到有限的平面被分成了四块，按照数据结构展示出来可以理解为一个四叉树，那么当来到了三维空间时，多了一条 Z 轴的情况下，一个整体的立方体就被分成了等分的八个立方体，同时也就可以看作八叉树，也正是所说的 Octree 。

<img src="https://img-blog.csdnimg.cn/20190605210205656.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3ODU1NTA3,size_16,color_FFFFFF,t_70" alt="八叉树立体概念图" style="zoom: 33%;" />

<center>八叉树的立体结构图<center>

​	上图可以看见，表示三位空间的立方体，被分为了多个立方体，也被称作节点，节点一共可以分三类：

- 白色节点：所对应的立方体不存在要寻找的内容
- 灰色节点：所对应的立方体部分被要寻找的内容所占据
- 黑色几点：所对应的立方体完全被要寻找的内容所占据

​	其中，白色节点和黑色节点被称作叶子节点，灰色节点被称作根节点（ 非叶节点 ）。

![在这里插入图片描述](https://img-blog.csdnimg.cn/img_convert/09034a99ab2e3f909b5893ed78609ada.png#pic_center)

## 存储结构

​	由于存储方式有三种，分别是规则方式、线性方式和一对八方式，因此相应的八叉树也被称作规则八叉树、线性八叉树和一对八式八叉树。

### 规则八叉树

​	按照我的理解来说的话，应该是每一层的每一个节点都是根节点，只有最底层是叶子节点。这样做的好处是规律自然，方便人理解。但是缺点也很明显，就是会占用很多的内存，即便是没有意义的节点，仍然会存在。

### 线性八叉树

​	按照某一特定的方式（ 深度遍历 or 广度遍历 ）来对八叉树进行一次遍历，将遍历结果存储到一个线性表中，每一个元素对应一个节点。同时可以采取一些适当的方式来说明节点的类型。

​	线性八叉树的优点在于节省了更多的内存空间，运算时也会变得更方便。但是缺点就是当八叉树出现了修改的时候，修改线性表会变得没有那么方便。

## 一对八式八叉树

> 一个非叶结点有八个子结点，为了确定起见，将它们分别标记为0，1，2，3，4，5，6，7。从上面的介绍可以看到，如果一个记录与一个结点相对应，那么在这个记录中描述的是这个结点的八个子结点的特性值。而指针给出的则是该八个子结点所对应记录的存放处，而且还隐含地假定了这些子结点记录存放的次序。也就是说，即使某个记录是不必要的(例如，该结点已是叶结点)，那么相应的存贮位置也必须空闲在那里（图2-5-3），以保证不会错误地存取到其它同辈结点的记录。这样当然会有一定的浪费，除非它是完全的八叉树，即所有的叶结点均在同一层次出现，而在该层次之上的所有层中的结点均为非叶结点。

## 一些文章

https://www.cnblogs.com/Glucklichste/p/11505743.html

https://blog.csdn.net/weixin_41966507/article/details/123028763

https://zhuanlan.zhihu.com/p/419824123
